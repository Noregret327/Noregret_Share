# Linux基础教程

## 1 Linux简介

### 1.1 什么是Linux

##### 1. Linux的含义

* Linux具有良好的可移植性，广泛应用于个人PC、服务器、工作站和大型机，以及包括嵌入式系统在内的各种硬件设备。

* 与Windows系统相比，作为自由软件的Linux具有软件成本低、安全性高以及更加可信赖等优势。
* Linux具有双重含义。Linux本身只表示Linux内核，但实际上人们已经习惯用Linux形容Linux的各种发行版，把它们统称为Linux操作系统。
* Linux的发行版是基于Linux内核，并且搭配了各种人机界面、应用软件和服务软件的操作系统。如：CentOS Linux、Ubuntu Linux、Redhat Linux、红旗Linux等操作系统。

##### 2.POSIX标准

- POSIX是Portable Operating System Interface of UNIX（UNIX可移植操作系统接口）的缩写，定义一套标准的操作系统接口和工具。还有几个其他的IEEE标准，例如1224和1228，它们也提供用于开发可移植应用程序的API。
- Linux是一个遵循POSIX标准的操作系统。任何基于POSIX标准编写的操作系统都可以移植到Linux系统上。



### 1.2 Linux发展历程

##### 1.Linux产生的历史条件

Linux的诞生和发展和UNIX系统、Minix系统、Internet、GNU计划密不可分。

###### 1）UNIX系统

1971年，UNIX操作系统诞生于AT&T公司的贝尔实验室。UNIX是一个多用户、多任务的分时操作系统。Linux就是继承该系统的优秀设计思想，集成了该系统的各种优点。该系统的特点：

- 无可比拟的安全性与稳定性
- 良好的伸缩性，系统内核和核外程序均可裁剪
- 强大的TCP/IP支持功能
- 良好的可移植性，支持广泛的硬件平台

###### 2）Minix系统

1987年，荷兰人开发设计一个微型的UNIX操作系统——Minix。Minix是一个基于微内核技术的类似于UNIX的操作系统，主要用于操作系统课程的教学和研究。Minix系统的名称取自英语Mini UNIX，全部程序代码约12 000行，约300MB，十分小巧。

* 除了启动的部分以及汇编语言编写外，其他大部分都是用C语言编写。
* Minix系统主要分为内核、内存管理以及文件管理3部分。
* Minix与UNIX不同，Minix对硬件的要求不高，可以运行在廉价的PC上。**Linux操作系统就是在Minix系统的基础上开发和设计的。**

###### 3）Internet

1985年左右，Internet形成。通过Internet（因特网），全球的计算机通过网络连接起来，所有用户都可以通过Internet相互交流和获取信息。无数的程序员通过Internet参与了Linux的技术改进和测试工作。任何人想往内核中加入新的特性，只要被认为有用的、合理的，就运行加入。这样，Linux发展起来，没有Internet就没有今天生命力如此强大、不断发展的Linux操作系统。

###### 4）GNU计划

Linux的发展是和GNU计划紧密联系在一起。Linux内核从一开始就是按照公开的POSIX标准编写的，并且使用了来自自由软件基金会的GNU软件，同时Linux自身也是用它们构造而成的。

##### 2.Linux的诞生

Linux起源于芬兰赫尔辛基大学计算机系一个学生的个人爱好。Linus Torvalds是Linux的发明者与主要维护者。Linux内核最早在1991年开发出来的，Linus有一个大胆的梦想：”制作一个比Minix更好的操作系统，希望有一天能够在自己的Linux系统上重新编译GCC。“

Linux并没有包括UNIX源代码，它是按照公开的POSIX标准重新编写的。



### 1.3 Linux的特点

Linux操作系统是由世家各地成千上万的程序员设计和实现的。目的是建立不受任何商品化软件版本制约的、全世界都能自由使用的UNIX兼容产品。和其他商用UNIX系统以及Windows系统相比，作为自由软件的Linux系统具有成本低、安全性高、更加可信赖的优势。

###### Linux的优点

1. 基于UNIX设计，性能出色。多用户、多任务的类UNIX操作系统。具有执行速度快、占用内存空间小，并且性能优异，全天候不间断工作，系统不会死机。
2. 遵循GPL。用户可以免费获得和使用Linux，并且再GPL的范围内自由修改和传播。
3. 符合POSIX标准，兼容性好。
4. 可移植性好。
5. 网络功能强大。1）支持Internet；2）支持文件传输；3）支持远程访问。
6. 设备独立性。
7. 安全性强。
8. 良好的用户界面。

###### Linux的缺点

- Linux发行版本太多
- 不同版本的使用存在差异
- 不同版本之间的兼容性不好
- 入门的门槛要求较高
- 中文支持不够好

###### Linux系统的组成

基本组成包括内核、Shell、文件系统、应用程序等几个部分。

![image-20230413152954892](https://raw.githubusercontent.com/Noregret327/picture/master/202304131529926.png)



### 1.4 Linux的应用

##### 1.Linux的应用

从Linux的应用方面来看，主要有针对普通用户的桌面应用和针对系统管理的服务应用两类。Linux的发行套件也有桌面版和服务器版。

###### 1）桌面应用

大多数桌面版的Linux发行套件已经摒弃早期版本难以安装、难以使用的缺点，十分类似于用户常见的windows桌面系统平台。Linux提供直观的图形化界面。

###### 2）服务应用

Linux主要应用于架设各种服务器的高端领域，特别是中高端服务器系统，广泛应用于通讯系统、金融机构、商业、军事领域以及高等院校、科研院所。

##### 2.Linux的发展

Linux内核的发展方向主要是对新体系结构和新硬件技术的支持。具体如下

1. 以Linux内核为基础，开发高性能分布式操作系统，以满足分布式系统的发展，进行大数据量的处理工作。
2. 在嵌入式系统领域，要提供对更多硬件平台的支持，以及对硬件驱动程序的支持。
3. 面向个人用户，提供易于操作的使用界面和清晰说明文档，降低普通用于的使用门槛，普及Linux系统的使用。



### 1.5 Ubuntu简介

Ubuntu是十分流行的桌面Linux发行版。Ubuntu是一个以桌面应用为主的Linux操作系统。Ubuntu在于为一般用户提供一个最新的、同时又相当稳定的主要自由软件构建而成的操作系统。Ubuntu每6个月会发布一个新版本。

Ubuntu有两个版本，分别是Desktop和Server。

###### 官网：

[企业开源和Linux | Ubuntu](https://cn.ubuntu.com/)





## 2 Linux系统接口管理

### 2.1 操作系统接口

1. 命令接口——Shell命令接口
2. 图形接口——X Window图形接口
3. 程序接口——在程序中用C语言调用



### 2.2 GNOME快捷键

1. Super键（windows键）
2. Ctrl+Alt+T：打开终端
3. Ctrl+Alt+L（或Super+L）：锁屏
4. Ctrl+Alt+D（Super+D）：显示桌面
5. Super+A：应用程序菜单
6. Super+Tab（或Alt+Tab）：应用程序切换
7. Super+方向键：移动窗口
8. Super+M：切换到状态栏
9. Super+空格：切换输入法
10. Ctrl+Q：关闭应用程序
11. Ctrl+Alt+方向键：切换工作区
12. Ctrl+Alt+Del：注销



### 2.3 程序接口

##### 1.各个系统调用及功能表

###### 表1 进程

| 系统调用 | 功能                 | 系统调用    | 功能               |
| -------- | -------------------- | ----------- | ------------------ |
| fork     | 创建子进程           | getpriority | 获取调度优先级     |
| clone    | 按指定条件创建子进程 | setpriority | 设置调度优先级     |
| execve   | 远程可执行文件       | pause       | 挂起进程，等待信号 |
| exit     | 终止进程             | wait        | 等待子进程终止     |
| getpid   | 获取进程标识号       |             |                    |

###### 表2 文件系统

| 系统调用 | 功能             | 系统调用 | 功能                   |
| -------- | ---------------- | -------- | ---------------------- |
| open     | 打开文件         | mkdir    | 创建目录               |
| creat    | 创建新文件       | symlink  | 创建符号链接           |
| read     | 读文件           | mount    | 安装文件系统           |
| write    | 写文件           | umount   | 卸载文件系统           |
| truncate | 截断文件         | ustat    | 获取文件系统信息       |
| chdir    | 改变当前工作目录 | utime    | 改变文件的访问修改时间 |
| stat     | 获取文件状态信息 |          |                        |

###### 表3 系统

| 系统调用  | 功能                                     |
| --------- | ---------------------------------------- |
| _sysctl   | 读写系统参数                             |
| getrusage | 获取系统资源使用情况                     |
| uselib    | 选择要使用的二进制函数库                 |
| reboot    | 重启                                     |
| swapon    | 打开交换文件和设备                       |
| sysinfo   | 获取系统信息                             |
| alarm     | 设置进程的闹钟                           |
| stime     | 设置系统日期和时间                       |
| time      | 获取系统时间                             |
| times     | 获取系统使劲啊获取进程运行时间           |
| uname     | 获取当前UNIX系统的名称、版本和主机等信息 |

###### 表4 存储管理

| 系统调用   | 功能                     | 系统调用    | 功能                         |
| ---------- | ------------------------ | ----------- | ---------------------------- |
| mlock      | 内存页面加锁             | mremap      | 重新映射虚拟内存地址         |
| munlock    | 内存页面解锁             | msync       | 将映射内存中的数据写回磁盘   |
| mlockall   | 调用进程所有内存页面加锁 | mprotect    | 设置内存映射像保护           |
| munlockall | 调用进程所有内存页面解锁 | getpagesize | 获取页面大小                 |
| mmap       | 映射虚拟内存页           | sync        | 将内存缓冲区数据写回磁盘     |
| munmap     | 解除内存页映射           | cacheflush  | 将指定缓冲去中的内容写回磁盘 |

###### 表5 网络管理

| 系统调用      | 功能           | 系统调用    | 功能           |
| ------------- | -------------- | ----------- | -------------- |
| getdomainname | 获取域名       | sethostid   | 设置主机标识号 |
| setdomainname | 设置域名       | gethostname | 获取主机名称   |
| gethostid     | 获取主机标识号 | sethostname | 设置主机名称   |

###### 表6 socket控制

| 系统调用   | 功能               | 系统调用    | 功能                  |
| ---------- | ------------------ | ----------- | --------------------- |
| socketcall | socket系统调用     | listen      | 监听socket端口        |
| socket     | 建立socket         | select      | 对多路同步I/O进行轮询 |
| bind       | 绑定socket到端口   | shutdown    | 关闭socket上的连接    |
| connect    | 连接远程主机       | getsockname | 获取本地socket名字    |
| accept     | 响应socket连接请求 | getsockopt  | 获取端口参数          |
| send       | 通过socket发送信息 | setsockopt  | 设置端口参数          |
| recv       | 通过socket接收信息 |             |                       |

###### 表7 用户管理

| 系统调用  | 功能                                     |
| --------- | ---------------------------------------- |
| getuid    | 获取用户标识号                           |
| setuid    | 设置用户标识号                           |
| getgid    | 获取组标识号                             |
| setgid    | 设置组标识号                             |
| setregid  | 分别设置真实、有效的组标识号             |
| setreuid  | 分别设置真实、有效的用户标识号           |
| getresgid | 分别获取真实、有效的和保存过的组标识号   |
| setresgid | 分别设置真实、有效的和保存过的组标识号   |
| getresuid | 分别获取真实、有效的和保护过的用户标识号 |
| setresuid | 分别设置真实、有效的和保护过的用户标识号 |

###### 表8 进程通信

| 系统调用   | 功能                       | 系统调用 | 功能         |
| ---------- | -------------------------- | -------- | ------------ |
| sigaction  | 设置对指定信号的处理方法   | pipe     | 创建管道     |
| sigpending | 为指定的被阻塞信号设置队列 | semctl   | 信号量控制   |
| sigsuspend | 挂起进程，等待特定信号     | semop    | 信号量操作   |
| kill       | 向进程或进程组发信号       | shmctl   | 控制共享内存 |
| msgctl     | 消息控制                   | shmget   | 获取共享内存 |
| msgget     | 获取消息队列               | shmat    | 连接共享内存 |
| msgsnd     | 发消息                     | shmdt    | 拆卸共享内存 |
| msgrcv     | 收消息                     |          |              |

##### 2.API和系统调用的关系

API：Application Programming Interface——应用程序编程接口。程序员可以间接访问系统硬件和操作系统资源。操作系统的主要作用之一就是对**系统硬件和操作系统资源进行封装并对上层用户屏蔽**，防止用户有意或无意地对系统造成破坏。

API一般以函数的形式出现，如read（）、malloc（）、abs（）等。但是API并不需要和系统调用一一对应，它们之间的关系可以是一对一、一对多、多对一或者没有关系。

在Linux系统中，API遵循POSIX标准，这套标准中定义了一系列API。UNIX系统也同样遵循这些标准，这些API主要是通过C语言函数库实现。

```c
//获取当前进程的标识号，使用系统调用getpid来实现
#include<syscall.h>
#include<unistd.h>
#include<stdio.h>
#include<sys/types.h>
main()
{
    long i;
    i=getpid();
    printf("getpid()=%ld\n",i);
}
```





## 3 Linux文件系统

文件系统是操作系统用于确定磁盘或分区上的文件的方法和数据结构，即文件在磁盘上的组织方法。文件系统由3部分组成：

1. 与文件管理有关的软件
2. 被管理的文件
3. 实施文件管理所需的数据结构

### 3.1 Ubuntu的文件系统

##### 1.FAT文件系统

- FAT：File Allocation Table——**文件分配表**。
- FAT文件系统优点是允许多种操作系统访问。

- FAT文件系统也是一种最初用于小型磁盘和简单文件夹结构的简单文件系统，用文件分配表映射和管理磁盘空间。
- FAT16最大只能支持2GB，FAT32最大可达2047GB。
- FAT32文件系统主要应用于Window 98系统。

##### 2.NTFS文件系统

- NTFS：New Technology File System——**新技术文件系统**。
- 它支持文件系统故障恢复，尤其是大存储量的媒体和长文件名。
- NTFS是一个高可靠、可恢复的文件系统，提供了FAT文件系统所没有的安全性、可靠性和兼容性。
- 与FAT16和FAT32相比，NTFS的主要优点是：它通过使用相同卷大小条件下较小的簇，从而更有效地利用磁盘空间。只要简单地将文件系统从FAT转换为NTFS，就可以释放出几百兆字节（MB）的磁盘空间。
- NTFS弱点：只能被Windows NT/2000及以后的操作系统识别。

##### 3.Linux文件系统架构

**Linux操作系统的核心是内核，而文件系统则是操作系统与用户进行交互的主要工具。**

Linux作为开源操作系统，其最大的优势就是支持多种文件系统。现代Linux内核几乎支持计算机系统中的所有文件系统。

###### 1）设备驱动程序

文件系统需要利用存储设备来存储文件，因此，存储设备是文件系统的物质基础。其他设备也由文件系统统一管理。这些设备都由特定的设备驱动程序直接控制，它们负责设备的启动、数据传输控制和终端处理等工作。

Linux系统中各种设备驱动程序都通过统一的接口与文件系统连接。

###### 2）实际文件系统

实际文件系统是以磁盘分区来划分的，每个磁盘分区由一个具体的文件系统管理，不同磁盘分区的文件系统可以不同。

Linux支持几乎所有文件系统。**Linux默认使用的文件系统是Ext2/Ext3/Ext4。**

###### 3）虚拟文件系统

实际文件系统通常是为特定的操作系统专门设计的，各种文件系统具有不用的组织结构和文件操作接口函数，相互之间往往差别很大。Linux为了屏蔽各个文件系统之间的差别，为用户提供访问文件的统一接口，在具体的文件系统之上增加了一个称为虚拟文件系统（VFS——Virtual File System）的抽象层。

VFS是Linux文件系统对外的接口。任何要使用文件系统的程序都必须经由这个接口来使用它。

![image-20230413211019077](https://raw.githubusercontent.com/Noregret327/picture/master/202304132110100.png)

###### 4）缓冲机制

文件系统和存储设备进行数据传输时，采用了缓存机制来提高存储设备的访问效率。缓存去实在内存中划分的特定区域，每次从外部设备读取的数据都暂时存放在这里。VFS使用了内存缓存区、目录项缓存以及inode缓存等机制，使得整个文件系统具有相当高的效率。

##### 4.Ext2文件系统

Linux的Ext2文件系统和UNIX使用的其他文件系统非常相似，但更接近于BSD系统所用的FFS（快速文件系统）。Ext2文件系统的特点是存储文件的性能极好，对于中小型的文件更具优势，这主要得益于它的簇快取层的优良设计。

Ext2文件系统采用了多重索引结构。

###### Linux目录结构的描述

![image-20230413212448615](https://raw.githubusercontent.com/Noregret327/picture/master/202304132124661.png)

| 目录        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| /           | Linux文件系统的根目录                                        |
| /bin        | bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。 |
| /boot       | 这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。 |
| /dev        | dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。 |
| /etc        | etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。 |
| /home       | 用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。 |
| /lib        | lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。 |
| /lost+foubd | 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。 |
| /media      | linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。 |
| /mnt        | 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。 |
| /opt        | opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。 |
| /proc       | proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。<br/>这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：<br/>echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all |
| /root       | 该目录为系统管理员，也称作超级权限者的用户主目录。           |
| /sbin       | s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。 |
| /selinux    | 这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。 |
| /srv        | 该目录存放一些服务启动之后需要提取的数据。                   |
| /sys        | 这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。 |
| /tmp        | tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。 |
| /usr        | usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。 |
| /usr/bin    | 系统用户使用的应用程序。                                     |
| /usr/sbin   | 超级用户使用的比较高级的管理程序和系统守护程序。             |
| /usr/src    | 内核源代码默认的放置目录。                                   |
| /var        | var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。 |
| /run        | 是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。 |



### 3.2 创建、挂载与卸载文件系统

##### 1.创建文件系统

在安装操作系统时，安装程序将会引导用户提供必要的数据或作出相应的选择，然后划分磁盘分区，创建文件系统。在磁盘等存储设备分区之后，即可着手创建文件系统。

创建文件系统方法：

1）使用最基本的、通用的mkfs命令。在选定的磁盘分区中创建指定的文件系统。

2）利用各种特定的工具，如mke2fs、mkfs.ext2或mkfs.vfat等，在选定的磁盘分区上直接创建特定类型的文件系统。

用于创建Ext2/Ext3文件系统的mkfs与mke2fs命令的语法格式如下：

1）mkfs命令

```shell
mkfs [-V] [-t fstype] [fs-options] device [size]
```

2）mke2fs命令

```shell
mke2fs [-c|-1 filename] [-b block-size] [-f fragment-size]
```

##### 2.挂载文件系统

在Ubuntu系统中，对于一个文件系统或分区而言，如果想要使用它，必须先对其进行挂载操作。挂载就是把新建的文件系统安装到Linux文件系统目录层次结构的某个挂载点上，然后才能使用新建的文件系统。所以说，挂载点必须是目录，可以将挂载看成一个链接动作。

对于任何文件系统，都需要先进行挂载，然后才能使用。

挂载分区命令是mount，详见第4章。

##### 3.卸载文件系统

卸载文件系统意味着把文件系统从挂载点移走，删除/etc/mtab文件中的挂载项。

* 在文件系统的管理与维护工作中，有些工作只能在未挂载的文件系统中执行，因此需要进行卸载文件系统的操作；。
* 当不需要临时挂载的文件系统时，也应及时进行卸载操作，避免数据的误操作。





## 4 Linux常用命令

### 4.1Linux命令

##### 1.Shell程序的启动

Ctrl + Alt + T：启动Shell

###### 1）普通用户

提示符是：$

###### 2）root用户

提示符是：#

```shell
//进入root权限
su
```

##### 2.Shell命令格式

```
命令名 [-选项...][参数...]
```

- 命令名：命令的名称，通常为小写。
- 选项是以“-”（减号）作为前缀，减号代表选项的开始。
- 一个命令可能有多个选项，可以单独使用，也可以组合使用。

##### 3.远程连接

```
ssh user@remote -p port

//例子
ssh root@192.168.31.128
```



### 4.2目录操作基本命令

##### 1.ls命令

查看某个目录下的所有内容。

```
ls [选项] [文件名或目录]
```

| 选项 | 作用                                                       |
| ---- | ---------------------------------------------------------- |
| -s   | 显示每个文件的大小                                         |
| -S   | 按文件的大小排序                                           |
| -a   | 显示目录中的全部文件，包括隐藏文件                         |
| -l   | 使用长列表格式，显示文件详细信息                           |
| -t   | 按文件修改的时间排序显示                                   |
| -F   | 显示文件类型描述符。例如，*为可执行的普通文件，/为目录文件 |

| 颜色           | 意义                               |
| -------------- | ---------------------------------- |
| 黑色（默认色） | 普通文件                           |
| 绿色           | 可执行文件                         |
| 红色           | tar包文件，即Linux下的压缩打包文件 |
| 蓝色           | 目录文件，即一个目录               |
| 水红色         | 图像文件                           |
| 青色           | 链接文件，相当于快捷方式           |
| 黄色           | 设备文件，即一个设备               |

| 命令            | 作用                             |
| --------------- | -------------------------------- |
| ls              | 显示当前目录下的所有文件及子目录 |
| ls hello.txt    | 显示文件hello.txt的信息          |
| ls -l hello.txt | 显示文件hello.txt的详细信息      |
| ls /home        | 显示/home目录下的内容            |

##### 2.cd命令

转换用户所在目录。

```
cd [路径名]
```

| 命令            | 作用                   |
| --------------- | ---------------------- |
| cd /            | 转换到根目录           |
| cdz             | 转到当前用户的宿主目录 |
| cd ..           | 返回上一层             |
| cd /home/ubuntu | 进入目录/home/ubuntu   |

| 符号    | 意思                                   |
| ------- | -------------------------------------- |
| .       | 当前目录                               |
| ..      | 上层目录                               |
| ~       | 当前用户的宿主目录                     |
| ~用户名 | 进入“~”后用户的宿主目录                |
| /       | 回到跟目录                             |
| -       | 前一目录，即进入当前目录之前操作的目录 |

##### 3.pwd命令

显示当前工作目录的绝对路径：

```
pwd
```

##### 4.mkdir命令

创建一个新目录。

```
mkdir [选项] 目录名
```

| 选项    | 作用                                                  |
| ------- | ----------------------------------------------------- |
| -m 权限 | 对新建目录设置设置存取权限。权限表示为777、744、755等 |
| -p      | 一次性建立多级目录，即以递归形式建立目录              |

##### 5.rmdir命令

只能删除一个空目录。

```
rmdir [-p]目录名
```

-p：代表递归删除各级空目录。

”rmdir 目录名“：只能删除空目录，删除所有文件得”rmdir -p 目录名“



### 4.3文件操作基本命令

##### 1.touch命令

创建文件

```
touch 文件名
```

##### 2.cat命令

基本作用是合并文件。还有显示字符等.

```
cat [选项] [文件名]...
```

| 选项 | 作用                                                 |
| ---- | ---------------------------------------------------- |
| -A   | 显示所有字符，包括换行符、制表符及其他非打印字符     |
| -n   | 对文件中所有的行进行编号并显示行号                   |
| -b   | 除了空行不编号外，对文件中其他行都进行编号并显示行号 |
| -s   | 将连续的空行压缩为一个空行                           |

Ctrl+D：退出回到命令提示符下

##### 3.cp命令

文件的复制

```
cp [-选项] <源文件> <目标>
```

“-i”：以安全询问的方式进行源文件的复制

目标：可以是相对路径，也可以绝对路径，目录后面带有新的文件名就对源文件重命名，如果没有文件名就是复制相同文件名。

##### 4.rm命令

删除指定的文件

```
rm [选项] [文件名或目录名]
```

| 选项   | 作用                                                 |
| ------ | ---------------------------------------------------- |
| -i     | 以安全询问的方式执行删除操作                         |
| -r或-R | 递归处理，将指定目录及子目录中所有指定的文件一并删除 |
| -f     | 强制删除文件或目录                                   |
| -v     | 显示命令执行过程                                     |
| -d     | 直接把要删除的目录的硬连接数据修改为0，删除该目录    |

##### 5.mv命令

可以移动文件。

```
mv 文件名 路径名
```

##### 6.chmod命令

可以修改文件的权限和文件的属性。

```
chmod [<文件使用者>+|-|=<权限类型>] 文件名1 文件名2 ...
```

| 选项  | 作用                           | 选项  | 作用                                   |
| ----- | ------------------------------ | ----- | -------------------------------------- |
| a+rw  | 为所有用户增加读、写的权限     | o-rwx | 取消其他用户的所有权限（读、写、执行） |
| a-rwx | 取消所有用户读、写、执行的权限 | ug+r  | 为所有者和组用户增加读权限             |
| g+w   | 为组用户增加写权限             | g=rw  | 只允许组用户读、执行，取消其写操作     |

| 符号 | 使用者                     | 符号 | 含义                       | 符号 | 权限       |
| ---- | -------------------------- | ---- | -------------------------- | ---- | ---------- |
| u    | 文件主，文件或目录的所有者 | +    | 增加权限                   | r    | 读权限     |
| g    | 文件主所在用户组           | -    | 取消权限                   | w    | 写权限     |
| o    | 其他用户                   | =    | 赋值指定权限，取消其他权限 | x    | 可执行权限 |
| a    | 所有用户                   |      |                            |      |            |

数字表示权限：4表示读权限；2表示写权限；1表示可执行权限。即rwx表示4+2+1=7。

```shell
//示例
//相同效果命令1
chmod a=rwx filename
chmod 777 file filename
//相同效果命令2
chmod ug=rwx,o=x filename
chmod 771 filename
```



### 4.4文件处理命令

##### 1.grep命令

可以实现在指定的文件中查找某个特定的字符串。

```
grep [选项] 关键字 文件名
```

-i：表示不区分大小。

```shell
//查找文件中的字符串
ls
cat hello.txt
grep hello hello.txt
```

##### 2.head命令

查看文件开头部分的内容。

```
head [数字选项] 文件名
```

-2：表示显示该文件的前2行内容。

##### 3.tail命令

查看文件结尾部分的内容。

```
tail [数字选项] 文件名
```

-5：表示指定显示结尾5行。

##### 4.wc命令

对文件的行数、单词数、字符数进行统计。

```
wc [选项] 文件名
```

| 选项 | 作用       |
| ---- | ---------- |
| -l   | 显示行数   |
| -w   | 显示单词数 |
| -m   | 显示字符数 |

##### 5.sort命令

对文件内容或查询结果进行排序。

```
sort [选项] 文件名
```

| 选项 | 作用                                     |
| ---- | ---------------------------------------- |
| -f   | 忽略大小写                               |
| -r   | 反向排序                                 |
| -t   | 指定分隔符                               |
| -i   | 只考虑可以打印的字符，忽略任何非显示字符 |

##### 6.find命令

查找文件或目录。

```
find 文件名（或目录名）
```

##### 7.which命令

按PATH变量所规定的路径查找相应的命令，显示该命令的绝对路径。

```
which 命令名
```

##### 8.whereis命令

它不但能查找命令，而且能查找Ubuntu资料库里记载的文件。

```
whereis [选项] 文件名
```

| 选项 | 作用                     |
| ---- | ------------------------ |
| -b   | 只查找二进制文件         |
| -w   | 只查找manual路径下的文件 |

##### 9.locate命令

将所有与被查询的文件名相同的文件查找出来。

```
locate 文件名
```



### 4.5压缩备份基本命令

##### 1.bzip2命令和bunzip2命令

bzip2和bunzip2是一对压缩和解压命令。（压缩扩展后缀：.bz2）

```
bzip2 文件名1
bunzip2 文件名1
```

##### 2.gzip命令

常用的压缩和解压文件。（压缩扩展后缀：.gz）

```
gzip [-选项] 文件名
```

| 选项 | 作用                |
| ---- | ------------------- |
| -d   | 解压                |
| -n   | 指定压缩界面（1-9） |

默认级别是6；1的压缩比最低，速度最快；9的压缩比最高，速度最慢。

##### 3.unzip命令

对压缩文件进行解压操作。（压缩扩展后缀：.zip）

```
unzip [选项] 文件名
```

| 选项 | 作用                     | 选项 | 作用                             |
| ---- | ------------------------ | ---- | -------------------------------- |
| -d   | 将文件解压到指定目录中   | -n   | 不覆盖以及存在的同名文件         |
| -v   | 查看文件目录列表但不解压 | -o   | 以默认方式覆盖已经存在的同名文件 |

```
//解压.zip文件
unzip file.zip
//只查看文件
unzip -v file.zip
//将文件解压到/home/ubuntu/yasuo目录
unzip -n file.zip -d /home/ubuntu/yasuo
```

##### 4.zcat命令和bzcat命令

都用来查看压缩文件内容

```
zcat 文件名
bzcat 文件名
```

不同之处：zcat命令针对.gz的压缩文件；bzcat命令针对.bz2的压缩文件。

##### 5.tar命令

对文件或者目录进行打包备份和解包操作。

```
tar [-选项] [备份包的文件名] ] [要打包（或要解包）的文件或目录]
```

| 选项 | 作用                                     |
| ---- | ---------------------------------------- |
| -c   | 创建新的打包文件                         |
| -x   | 抽取.tar文件里的内容                     |
| -z   | 打包后直接用gzip命令压缩或者解压文件     |
| -j   | 打包后直接用bzip2命令压缩或者解压文件    |
| -t   | 查看打包文件里的文件目录                 |
| -f   | 使用文件或设备                           |
| -v   | 在打包或解压包后将文件的详细清单显示出来 |

```
//典型应用
//把file1、file2、file3打包，文件名为filename.tar
tar -cf filename.tar file1 file2 file3
//查看filename.tar打包文件里的内容
tar -tf filename.tar
//抽取filename.tar打包文件里的内容，filename。tar文件保存不变，不会消失。
tar -xf filename.tar
```



### 4.6磁盘操作命令

##### 1.mount命令

挂载。现在计算机系统都是由UNIX系统、Linux系统和Windows系统组成的混合系统，在不同系统之间经常需要进行数据交换，这就需要经常在Linux系统下挂载光盘镜像文件、移动硬盘、U盘等。

```
mount [-t vfstype] [-o 选项] device dir
```

-t：vfstype指定文件系统的类型。

-o：选项主要用来描述设备或文档的挂载方式。

| vfstype中的各个选项 | 作用                      |
| ------------------- | ------------------------- |
| iso9660             | 光盘或光盘镜像            |
| msdos               | DOS FAT16文件系统         |
| vfat                | Window 9x FAT32文件系统   |
| ntfs                | Windows NT NTFS文件系统   |
| smbfs               | Mount Windows文件网络共享 |
| nfs                 | UNIX（Linux）文件网络共享 |

| -o选项    | 作用                                   |
| --------- | -------------------------------------- |
| loop      | 用来把一个文件当成硬盘分区挂载在系统上 |
| ro        | 采用只读方式挂载设备                   |
| rw        | 采用读写方式挂载设备                   |
| iocharset | 指定访问文件系统所用字符集             |
| device    | 要挂载的设备                           |
| dir       | 设备在系统上的挂载点                   |

```shell
//挂载U盘
//先查看硬盘和硬盘分区情况
fdisk -1
//建立一个目录用来作为挂载点
mkdir -p /mnt/usb
//挂载U盘
mount -t vfat /dev/sdd1 /mnt/usb
//最后可以通过/mnt/usb来访问U盘
```

##### 2.umount命令

卸载一个文件系统，它的使用权限是超级用户或/etc/fstab中允许的用户。

```
umount <挂载点|设备>
```

umount命令是mount命令的逆操作，它的参数和使用方法与mount命令是一样的。

```
//卸载USB设备
mount /mnt/usb
```

##### 3.df命令

查看当前磁盘的分区信息。

```
df [选项]
```

| 选项 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | 把全部的文件系统和各分区的磁盘使用情况列出来                 |
| -i   | 列出inodes（i结点）的使用量                                  |
| -k   | 把各分区的大小和挂载的分区的大小以KB为单位显示               |
| -h   | 把各分区的大小和挂载的分区的大小以MB或GB为单位显示           |
| -t   | 列出某个文件系统的所有分区的磁盘空间使用量                   |
| -x   | 列出不属于某个文件系统的所有分区的使用量（和-t选项作用相反） |
| -T   | 列出每个分区所属文件系统的名称                               |

##### 4.du命令

查看当前目录下所有文件及目录的信息。

```
du [选项]
```

| 选项 | 作用                               |
| ---- | ---------------------------------- |
| -a   | 列出所有文件及目录的大小           |
| -h   | 以GB或MB为单位显示文件或目录的大小 |
| -b   | 显示目录和文件的大小，以B为单位    |
| -c   | 最后加上总计                       |
| -s   | 只列出各文件大小的总和             |
| -x   | 只计算属于同一个文件系统的文件     |

##### 5.fsck命令

硬盘检测。该命令只能由root用户执行。

```
fsck 分区名
```



### 4.7关机重启命令

##### 1.shutdown命令

安全关机。

```
shutdown [选项] [时间] [警告信息]
```

| 选项 | 作用                       | 选项 | 作用                         |
| ---- | -------------------------- | ---- | ---------------------------- |
| -h   | 停止系统服务，然后安全关机 | -k   | 不真正关机，只是发出警告信息 |
| -r   | 停止系统服务，然后安全重启 | -t   | 在规定的时间后关机           |

```
//在2分钟后关机
shutdown -h +2
```

##### 2.halt命令

关机。

```
halt [选项]
```

```
//关机
halt
//强制关机
half -f
```

##### 3.poweroff命令

关机。

```
poweroff
```

##### 4.reboot重启

重启。

```
reboot
```

##### 5.init命令

切换Ubuntu运行级别。

```
init [运行级别]
```

一共7级，0-6。0代表关机，6代表重新启动。



### 4.8其他命令

##### 1.echo命令

显示命令行中的字符串，主要用于输出提示信息。

```
echo [选项] [字符串]
```

-n选项：表示输出字符串后光标不换行。

##### 2.more命令和less命令

对文件内容或者查询结果分屏显示。

```
more [选项] 文件名
less [选项] 文件名
```

more：最基本的按键控制：空格键下翻一页显示；B键上翻一页显示；Q键退出。

less：允许用户向上翻动，可以使用Page Up键、Page Down键实现上下翻。

| 选项 | 作用                       |
| ---- | -------------------------- |
| -p   | 不滚屏，清屏               |
| -s   | 将连续的空行压缩为一个空行 |
| +n   | 从第n行开始显示            |

##### 3.help命令和man命令

显示某个命令的格式和用法

```
help 命令名
man 命令名
```

##### 4.cal命令

显示日历。

```
cal [选项] [[月]年]
```

| 选项 | 作用                                   |
| ---- | -------------------------------------- |
| -m   | 以星期一为每周的第一天显示日历         |
| -j   | 以恺撤历显示，即以从1月1日起的天数显示 |
| -y   | 显示今年年历                           |

##### 5.data命令

显示及设定系统时间。

```
date [选项]+显示时间的格式
data 设定的系统时间
```

| 选项 | 作用                   |
| ---- | ---------------------- |
| -u   | 使用格林尼治时间       |
| -r   | 最后一次修改文件的时间 |



## 5 Linux常用应用软件

### 5.1 LibreOffice

在Ubuntu11.04版本以前，集成的办公软件套件是OpenOffice.org。

LibreOffice是OpenOffice.org办公套件衍生版。

##### 1.LibreOffice Writer

LibreOffice Writer是LibreOffice的一个组件，与Word有着类似功能。

##### 2.LibreOffice Calc

LibreOffice Calc是LibreOffice的一个组件，其作用相当于Excel。

##### 3.LibreOffice Draw

LibreOffice Draw与Visio软件相近。



### 5.2 vi文本编辑器

##### 1.vi编辑器的启动

```
Ctrl+Alt+T
vi [文件名]
```

退出vi编辑器

```
:w 				//保存文件
:w a.txt		//保存至a.txt文件
:q 				//退出编辑器，如果文件已修改，使用下面两个命令
:q! 			//退出编辑器，且不保存
:wq 			//退出编辑器，且保存文件
:w [filename] 	//另存为新文件
:r [filename] 	//读入新文件内容
```

##### 2.vi编辑器的基本应用

|   命令    |                        作用                        |
| :-------: | :------------------------------------------------: |
|   Home    |                   光标移动到首行                   |
|    End    |                   光标移动到行尾                   |
|  Page Up  |                      向上翻页                      |
| Page Down |                      向下翻页                      |
|  Ctrl+U   |                     向上翻半屏                     |
|  Ctrl+D   |                     向下翻半屏                     |
|  Ctrl+B   |           向上翻一屏，功能与Page Up一样            |
|  Ctrl+F   |          向下翻一屏，功能与Page Down一样           |
|     a     |              在光标位置后开始接收输入              |
|     A     |                在行尾后开始接收输入                |
|     i     |              在光标位置前开始接收输入              |
|     I     |                在行首前开始接收输入                |
|     o     | 在光标所在行之后开辟一个新的空行，并开始接收输入。 |
|     O     | 在光标所在行之前开辟一个新的空行，并开始接收输入。 |

移动光标

| 命令 | 描述 |
| :--: | :--: |
|  J   | 向下 |
|  K   | 向上 |
|  H   | 向左 |
|  L   | 向右 |

行数移动

|   命令   |  英文   |   功能   |
| :------: | :-----: | :------: |
| Ctrl + b |  back   | 向上翻页 |
| Ctrl + f | forward | 向下翻页 |
|    H     |  Head   | 屏幕顶部 |
|    M     | Middle  | 屏幕中间 |
|    L     |   Low   | 屏幕底部 |

段落移动

| 命令 |  功能  |
| :--: | :----: |
|  {   | 上一段 |
|  }   | 下一段 |



##### 3.删除文本

删除文本时，一般情况下，要保证当前处于命令模式下。

```
1）按Esc键进入命令模式，才能使用删除命令进行字符的删除操作。
2）移动光标到要删除的字符上，输入删除命令。
```

| 命令 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| x    | 删除光标处的单个字符                                         |
| X    | 删除光标左边的单个字符                                       |
| D    | 删除一行文本。（如果光标在文本的中部，则删除此行光标右边的文本） |
| dd   | 删除光标所在行的文本，包括硬回车。                           |
| J    | 将当前行与下一行合并为一行，即删除当前行的行尾处的换行符，光标置于第二行。 |

### 5.3 Gedit文本编辑器

Gedit是一个图形化的文本编辑器，其使用方便、直观，可以打开、编辑并保存纯文本文件。

### 5.4 Shotwell照片管理器

Shotwell是Linux下预装的照片管理器，适用于GNOME桌面环境。



## 6 进程管理与系统监控

### 6.1进程管理

##### 1.启动进程

```
vi story
Ctrl+Z		//将该进程挂起
ps -e		//显示所有进程
vi	song&	//&以后台方式启动进程
```

| 选项 | 作用                         | 选项 | 作用                         |
| ---- | ---------------------------- | ---- | ---------------------------- |
| -e   | 显示所有进程                 | a    | 显示所有终端的所有进程       |
| -f   | 以全格式显示所有进程         | u    | 以面向用户的格式显示所有进程 |
| -r   | 只显示正在运行的进程         | x    | 显示所有不占用终端的进程     |
| -o   | 以用户定义的格式显示所有进程 |      |                              |

查看当前用户进程的优先级

```
ps -l	
```

##### 2.终止进程

```
Ctrl+C		//组合键终止进程
kill		//命令终止进程
```



### 6.2系统日志

##### 1.常用的日志文件

```
cd /var/log
```

##### 2.查看用户登录信息

```
last [-adRx] [-f] [-n] [用户名...] [终端号...]
```

| 选项 | 作用                                           |
| ---- | ---------------------------------------------- |
| -a   | 把登录系统时的主机名或IP地址显示在最后一行     |
| -d   | 将IP地址转换成主机名                           |
| -f   | 指定记录文件                                   |
| -n   | 设置用户名的显示列数                           |
| -R   | 不显示登录系统的主机名或IP地址                 |
| -x   | 显示系统关机、重新开机以及执行等级的改变等信息 |



### 6.3系统监视器

启动命令

```
gnome-system-monitor
```



### 6.4查看内存状况

查看命令

```
free
free -m			//以MB为单位显示
```



### 6.5文件系统监控

命令

```
df -h
```



## 7 系统管理和维护

### 7.1用户身份转换命令

##### 1.激活root用户

普通用户，终端显示"$"

```
sudo passwd root
```

然后可以执行转换到root用户

```
su root
```

##### 2.重新锁定root用户

重新锁定root用户时，需要先利用su命令转换到普通用户，然后再执行：

```
sudo passwd -l root
```

##### 3.sudo命令

以超级管理员身份执行操作

```
sudo 命令
```

##### 4.passwd命令

修改用户密码

```
passwd 用户名
```

##### 5.su命令

转换用户

```
su 用户名
```

##### 6.useradd命令

创建一个新用户

```
useradd 新用户名
```

### 7.2软件包管理

##### 1.高级软件包管理工具API

简介：

APT——Advanced Packaging Tool，高级打包工具，是Ubuntu软件包管理系统的高级界面。

##### 2.apt-get命令

```
apt-get
```

| 命令       | 作用                               |
| ---------- | ---------------------------------- |
| update     | 取回更新的软件包列表信息           |
| upgrade    | 进行一次升级                       |
| install    | 安装新的软件包                     |
| remove     | 卸载软件包                         |
| autoremove | 卸载所有自动安装且不再使用的软件包 |
| purge      | 卸载软件包                         |
| source     | 下载源码包文件                     |
| build-dep  | 为源码包配置编译依赖关系           |
| clean      | 删除所有已下载的包文件             |

2
